{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nconst searchButton = document.querySelector('button[type=\"search\"]');\nconst loadMore = document.querySelector('button[class=\"loadmore\"]');\nconst form = document.querySelector(\"form\");\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".gallery\");\n\nlet currentPage = 1;\nlet currentSearchItem = '';\n\nsearchButton.addEventListener(\"click\", async (event) => {\n    event.preventDefault();\n    gallery.innerHTML = '';\n    currentPage = 1;\n\n    currentSearchItem = document.querySelector(\"#image-search\").value.trim();\n\n    if (currentSearchItem === '') {\n        iziToast.error({\n            position: 'topRight',\n            message: 'Please enter your search query.',\n            });\n        return;\n    };\n\n    await fetchPosts();\n    form.reset();\n});\n\nloadMore.addEventListener(\"click\", async (event) => {\n    event.preventDefault();\n    currentPage += 1;\n    await fetchPosts();\n\n    const card = document.querySelector(\".search-result\");\n    const scrollHeight = card.getBoundingClientRect().height * 2;\n        \n    window.scrollBy({\n        top: scrollHeight,\n        behavior: \"smooth\",\n    });\n});\n\nconst fetchPosts = async () => {\n    loader.style.display = \"block\";\n\n    const params = new URLSearchParams({\n        key: \"54363861-75378e31e8cc289554c1794de\",\n        q: currentSearchItem,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        per_page: \"18\",\n        page: currentPage\n    });\n\n    const totalPages = Math.ceil(100 / 18);\n\n    if (currentPage > totalPages) {\n        loader.style.display = \"none\";\n        iziToast.error({\n            position: 'topRight',\n            message: \"We're sorry, but you've reached the end of search results\" ,\n        });\n        loadMore.style.display = \"none\";\n        return;\n    };\n\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?${params}`);\n        const results = response.data;\n\n        loader.style.display = \"none\";\n        if (results.totalHits <= 0 || results.totalHits > 0 && results.totalHits <= 18) {\n            iziToast.error({\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            loadMore.style.display = \"none\";\n            return;\n        };\n        showResults(results.hits);\n        loadMore.style.display = \"block\";\n    } catch (error) {\n        loader.style.display = \"none\";\n        iziToast.error({\n            position: 'topRight',\n            message: `${error}`,\n        });\n    }\n};\n    \nfunction showResults(results) {\n        const searchResults = results\n            .map((result) => {\n                return `\n                <ul class=\"search-result\">\n                    <li class=\"image\">\n                        <a class=\"gallery-link\" href=\"${result.largeImageURL}\"\n                        ><img\n                            class=\"gallery-image\"\n                            src=\"${result.webformatURL}\"\n                            data-source=\"${result.largeImageURL}\"\n                            alt=\"${result.tags}\"\n                        /></a>\n                    </li>\n                    <li class=\"stats\">\n                        <ul>\n                            <li class=\"likes\">\n                                <h2>Likes</h2>\n                                <p>${result.likes}</p>\n                            </li>\n                            <li class=\"views\">\n                                <h2>Views</h2>\n                                <p>${result.views}</p>\n                            </li>\n                            <li class=\"comments\">\n                                <h2>Comments</h2>\n                                <p>${result.comments}</p>\n                            </li>\n                            <li class=\"downloads\">\n                                <h2>Downloads</h2>\n                                <p>${result.downloads}</p>\n                            </li>\n                        </ul>\n                    </li>\n                    \n                </ul>\n            `;\n            })\n            .join(\"\");\n        \n        gallery.insertAdjacentHTML(\"beforeend\", searchResults);\n\n        const lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: \"alt\",\n            captionDelay: 250\n        });\n\n        lightbox.refresh()\n    }"],"names":["searchButton","loadMore","form","loader","gallery","currentPage","currentSearchItem","event","iziToast","fetchPosts","scrollHeight","params","totalPages","results","axios","showResults","error","searchResults","result","SimpleLightbox"],"mappings":"owBAQA,MAAMA,EAAe,SAAS,cAAc,uBAAuB,EAC7DC,EAAW,SAAS,cAAc,0BAA0B,EAC5DC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIC,EAAc,EACdC,EAAoB,GAExBN,EAAa,iBAAiB,QAAS,MAAOO,GAAU,CAOpD,GANAA,EAAM,eAAc,EACpBH,EAAQ,UAAY,GACpBC,EAAc,EAEdC,EAAoB,SAAS,cAAc,eAAe,EAAE,MAAM,OAE9DA,IAAsB,GAAI,CAC1BE,EAAS,MAAM,CACX,SAAU,WACV,QAAS,iCACrB,CAAa,EACL,MAER,CACI,MAAMC,EAAU,EAChBP,EAAK,MAAK,CACd,CAAC,EAEDD,EAAS,iBAAiB,QAAS,MAAOM,GAAU,CAChDA,EAAM,eAAc,EACpBF,GAAe,EACf,MAAMI,EAAU,EAGhB,MAAMC,EADO,SAAS,cAAc,gBAAgB,EAC1B,sBAAqB,EAAG,OAAS,EAE3D,OAAO,SAAS,CACZ,IAAKA,EACL,SAAU,QAClB,CAAK,CACL,CAAC,EAED,MAAMD,EAAa,SAAY,CAC3BN,EAAO,MAAM,QAAU,QAEvB,MAAMQ,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGL,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,KACV,KAAMD,CACd,CAAK,EAEKO,EAAa,KAAK,KAAK,IAAM,EAAE,EAErC,GAAIP,EAAcO,EAAY,CAC1BT,EAAO,MAAM,QAAU,OACvBK,EAAS,MAAM,CACX,SAAU,WACV,QAAS,2DACrB,CAAS,EACDP,EAAS,MAAM,QAAU,OACzB,MAER,CACI,GAAI,CAEA,MAAMY,GADW,MAAMC,EAAM,IAAI,4BAA4BH,CAAM,EAAE,GAC5C,KAGzB,GADAR,EAAO,MAAM,QAAU,OACnBU,EAAQ,WAAa,GAAKA,EAAQ,UAAY,GAAKA,EAAQ,WAAa,GAAI,CAC5EL,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EACzB,CAAa,EACDP,EAAS,MAAM,QAAU,OACzB,MACZ,CACQc,EAAYF,EAAQ,IAAI,EACxBZ,EAAS,MAAM,QAAU,OAC5B,OAAQe,EAAO,CACZb,EAAO,MAAM,QAAU,OACvBK,EAAS,MAAM,CACX,SAAU,WACV,QAAS,GAAGQ,CAAK,EAC7B,CAAS,CACJ,CACL,EAEA,SAASD,EAAYF,EAAS,CACtB,MAAMI,EAAgBJ,EACjB,IAAKK,GACK;AAAA;AAAA;AAAA,wDAGiCA,EAAO,aAAa;AAAA;AAAA;AAAA,mCAGzCA,EAAO,YAAY;AAAA,2CACXA,EAAO,aAAa;AAAA,mCAC5BA,EAAO,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAOTA,EAAO,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIZA,EAAO,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIZA,EAAO,QAAQ;AAAA;AAAA;AAAA;AAAA,qCAIfA,EAAO,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAOxC,EACA,KAAK,EAAE,EAEZd,EAAQ,mBAAmB,YAAaa,CAAa,EAEpC,IAAIE,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAC1B,CAAS,EAEQ,QAAS,CAC1B"}